<mat-grid-list
  class="calendar-weekly-container"
  [cols]="calendarColumns"
  rowHeight="50px"
>
  <mat-grid-tile
    class="calendar-weekly-header"
    *ngFor="let tile of weekDaysTiles"
    [colspan]="tile.event.cols"
    [rowspan]="tile.event.rows"
    [style.background]="tile.event.color"
  >
    <div *ngIf="tile.event.text">
      {{ tile.event.text }}
    </div>
  </mat-grid-tile>

  <mat-grid-tile
    *ngFor="let tile of hourlyTiles; let indexHourly = index"
    [colspan]="tile.event.cols"
    [rowspan]="tile.event.rows"
    [style.background]="tile.event.color"
  >
    <div *ngIf="tile.event.text; else events">
      {{ tile.event.text }}
    </div>
    <ng-template #events>
      <div
        class="calendar-weekly-body-events"
        cdkDropList
        #minutesList="cdkDropList"
        [cdkDropListData]="tile.event.minutes"
        (cdkDropListDropped)="onDrop($event)"
      >
        <div
          [id]="
            tile.event.column.toLocaleString() +
            tile.event.hour.toLocaleString() +
            minute.toLocaleString()
          "
          class="calendar-weekly-body-events-item"
          *ngFor="let minute of tile.event.minutes; let indexMinutes = index"
          (click)="onCalendarOrEventTileClick(tile, $event)"
          cdkDrag
        >
          <div
            *ngIf="isAppointment(minute)"
            class="calendar-weekly-appointments"
            [matMenuTriggerFor]="menu"
            (click)="$event.stopPropagation()"
          >
            {{ getappointmentTitle(minute) }}
            <mat-menu #menu="matMenu">
              <button
                mat-menu-item
                (click)="onDeleteAppointment(minute, indexHourly, indexMinutes)"
              >
                <mat-icon>delete</mat-icon>
                <span>Delete</span>
              </button>
            </mat-menu>
          </div>
        </div>
      </div>
    </ng-template>
  </mat-grid-tile>
</mat-grid-list>
